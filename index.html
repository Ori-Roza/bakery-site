<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>בית מאפה ברכת יעקב</title>
    <meta
      name="description"
      content="הזמנת מאפים טריים מבית מאפה ברכת יעקב – חלות, לחמים ומאפים מתוקים ומלוחים."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/styles.css" />
    <link rel="icon" type="image/png" href="assets/wheat.png" />
  </head>
  <body class="bg-amber-50 text-stone-800">
    <div class="min-h-screen">
      <header class="bg-amber-100/90 backdrop-blur border-b border-amber-200">
        <div class="max-w-6xl mx-auto px-3 sm:px-6 py-3 sm:py-6 flex flex-col gap-2 sm:gap-4">
          <a
            href="#admin"
            class="text-xs sm:text-sm text-amber-900/80 underline underline-offset-4 self-start"
            >אזור ניהול</a
          >
          <div class="text-center">
            <img
              id="site-logo"
              src="assets/b_yaakov_bakery_02.png"
              alt="לוגו ברכת יעקב"
              class="mx-auto h-28 sm:h-36 w-auto"
            />
            <input
              id="admin-logo-input"
              type="file"
              accept="image/*"
              class="hidden"
            />
          </div>
          <p class="text-xs sm:text-sm text-stone-700 max-w-xl mx-auto text-center leading-relaxed">
            מאפים חמים מהתנור, חומרי גלם איכותיים וטעם של שבת. הזמינו אונליין והאיסוף
            מוכן בדיוק בזמן.
          </p>
        </div>
      </header>

      <main class="max-w-6xl mx-auto px-3 sm:px-6 py-4 sm:py-8 space-y-6 sm:space-y-10">
        <section id="hero" class="hero-card">
          <div class="flex flex-col gap-3 sm:gap-4">
            <span class="badge text-xs sm:text-sm">חדש • הזמנות אונליין</span>
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-amber-900">
              בית המאפה שלכם לשבת, חג ובוקר מתוק
            </h2>
            <p class="text-sm sm:text-base text-stone-700">
              בחרו מאפים טריים, הוסיפו לסל ושלחו את ההזמנה לוואטסאפ של יעקב.
            </p>
            <div class="flex flex-wrap gap-2 sm:gap-3 text-xs sm:text-sm text-stone-700">
              <span class="info-chip flex items-center gap-2">
                <i data-lucide="clock-3" class="w-4 h-4"></i>
                איסוף מהיר באותו יום
              </span>
              <span class="info-chip flex items-center gap-2">
                <i data-lucide="wheat" class="w-4 h-4"></i>
                חלות בעבודת יד
              </span>
              <span class="info-chip flex items-center gap-2">
                <i data-lucide="sparkles" class="w-4 h-4"></i>
                מאפים חמים כל בוקר
              </span>
            </div>
          </div>
          <img
            src="https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=1200&q=80"
            alt="לחם חם וקריספי"
            class="hero-image"
          />
        </section>

        <section id="catalog" class="space-y-8 sm:space-y-10">
          <div class="space-y-3 sm:space-y-4">
            <div class="flex items-center justify-between">
              <h3 class="section-title">המומלצים של השבוע</h3>
            </div>
            <div class="carousel" id="featured-carousel">
              <div class="carousel-track" id="featured-track"></div>
            </div>
          </div>
          <div class="space-y-3 sm:space-y-4">
            <div class="flex items-center justify-between gap-3 flex-wrap">
              <h3 class="section-title">מוצרים</h3>
            </div>
            <div class="relative w-full sm:w-64">
              <input
                id="product-search"
                class="form-input pr-10"
                placeholder="חיפוש מוצר לפי שם"
              />
              <i
                data-lucide="search"
                class="w-4 h-4 text-stone-400 absolute left-3 top-1/2 -translate-y-1/2"
              ></i>
            </div>
            <div class="product-grid scroll-grid" id="products-scroll"></div>
          </div>
        </section>

        <section id="about" class="space-y-4">
          <h3 class="section-title">אודות</h3>
          <div class="checkout-card">
            <div class="grid gap-4 md:grid-cols-[1.1fr_0.9fr] items-center">
              <div id="about-content" class="text-stone-700 leading-relaxed"></div>
              <img
                src="https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=900&q=80"
                alt="מאפים טריים בתנור"
                class="rounded-2xl shadow-lg h-48 w-full object-cover"
              />
            </div>
          </div>
        </section>

        <section id="contact" class="space-y-4">
          <h3 class="section-title">יצירת קשר</h3>
          <div class="checkout-card grid gap-3">
            <a id="contact-phone" href="tel:+972501234567" class="flex items-center gap-2 text-stone-700">
              <i data-lucide="phone" class="w-4 h-4"></i>
              050-123-4567
            </a>
            <a
              id="contact-whatsapp"
              href="#"
              target="_blank"
              rel="noopener"
              class="flex items-center gap-2 text-stone-700"
            >
              <i data-lucide="message-circle" class="w-4 h-4"></i>
              וואטסאפ להזמנות
            </a>
            <a
              id="contact-email"
              href="#"
              class="flex items-center gap-2 text-stone-700"
            >
              <i data-lucide="mail" class="w-4 h-4"></i>
              <span id="contact-email-text"></span>
            </a>
            <div class="flex items-center gap-2 text-stone-700">
              <i data-lucide="map-pin" class="w-4 h-4"></i>
              רחוב המאפיה 12, ירושלים
            </div>
          </div>
        </section>

        <section id="checkout" class="space-y-4">
          <h3 class="section-title">סיום הזמנה</h3>
          <div class="checkout-card">
            <form id="checkout-form" class="grid gap-4">
              <div>
                <label for="customer-name" class="form-label">שם מלא</label>
                  <input
                    id="customer-name"
                    name="name"
                    type="text"
                    class="form-input"
                    placeholder="שם מזמין"
                    required
                  />
              </div>
              <div>
                <label for="customer-phone" class="form-label">טלפון</label>
                <input
                  id="customer-phone"
                  name="phone"
                  type="tel"
                  class="form-input"
                  placeholder="050-0000000"
                  required
                />
              </div>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                  <label for="pickup-date" class="form-label">תאריך איסוף</label>
                  <input
                    id="pickup-date"
                    name="date"
                    type="date"
                    class="form-input"
                    required
                  />
                </div>
                <div>
                  <label for="pickup-time" class="form-label">שעה</label>
                  <input
                    id="pickup-time"
                    name="time"
                    type="time"
                    class="form-input"
                    required
                  />
                </div>
              </div>
              <button
                type="submit"
                class="primary-button"
                id="whatsapp-submit"
              >
                שלח הזמנה
              </button>
            </form>
          </div>
        </section>

        <section id="admin" class="space-y-4 hidden">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h3 class="secondary-button text-sm font-semibold">אזור ניהול</h3>
            <div class="flex items-center gap-3">
              <button id="admin-logout" class="secondary-button hidden">
                התנתקות
              </button>
              <a href="#catalog" class="secondary-button">חזרה לחנות</a>
            </div>
          </div>
          <p id="admin-greeting" class="text-sm text-stone-600 hidden text-left"></p>
          <div id="admin-auth" class="admin-card">
            <h4 class="admin-title">כניסה לניהול</h4>
            <form id="admin-login-form" class="grid gap-4">
              <div>
                <label for="admin-email" class="form-label">אימייל</label>
                <input
                  id="admin-email"
                  name="email"
                  type="email"
                  class="form-input"
                  placeholder="admin@example.com"
                  required
                />
              </div>
              <div>
                <label for="admin-password" class="form-label">סיסמה</label>
                <input
                  id="admin-password"
                  name="password"
                  type="password"
                  class="form-input"
                  required
                />
              </div>
              <button type="submit" class="primary-button">
                התחברות
              </button>
            </form>
            <p id="admin-auth-error" class="text-sm text-rose-600 hidden"></p>
          </div>

          <div id="admin-panel" class="admin-grid hidden">
            <div class="admin-card">
              <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3">
                <h4 class="admin-title">ניהול מוצרים</h4>
                <button id="open-create-modal" class="primary-button sm:w-auto">
                  יצירת מוצר חדש
                </button>
              </div>
              <div class="mt-4 mb-4 relative">
                <input
                  id="admin-search"
                  class="form-input pr-10"
                  placeholder="חיפוש מוצר לפי שם/קטגוריה"
                />
                <i
                  data-lucide="search"
                  class="w-4 h-4 text-stone-400 absolute left-3 top-1/2 -translate-y-1/2"
                ></i>
              </div>
              <div class="admin-table-wrapper">
                <table id="admin-products-table" class="admin-table">
                  <thead>
                    <tr>
                      <th data-sort="title">שם מוצר</th>
                      <th data-sort="category">קטגוריה</th>
                      <th data-sort="price">מחיר</th>
                      <th data-sort="inStock">זמין</th>
                    </tr>
                  </thead>
                  <tbody id="admin-products"></tbody>
                </table>
              </div>
            </div>
            
            <div class="admin-card">
              <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3">
                <h4 class="admin-title">הזמנות אחרונות</h4>
                <button id="admin-new-order" class="primary-button sm:w-auto">
                  יצירת הזמנה חדשה
                </button>
              </div>
              <div class="mt-4 mb-4 relative">
                <input
                  id="admin-orders-search"
                  class="form-input pr-10"
                  placeholder="חיפוש הזמנה לפי שם/מזהה"
                />
                <i
                  data-lucide="search"
                  class="w-4 h-4 text-stone-400 absolute left-3 top-1/2 -translate-y-1/2"
                ></i>
              </div>
              <div class="admin-table-wrapper">
                <table id="admin-orders-table" class="admin-table">
                  <thead>
                    <tr>
                      <th data-sort="order_number">מזהה הזמנה</th>
                      <th data-sort="name">שם מזמין</th>
                      <th data-sort="created_at">תאריך</th>
                      <th data-sort="total">סכום</th>
                      <th data-sort="paid">שולם</th>
                      <th data-sort="notes">הערות</th>
                      <th data-sort="deleted">מחוק</th>
                    </tr>
                  </thead>
                  <tbody id="admin-orders"></tbody>
                </table>
              </div>
            </div>
            
            <div class="admin-card">
              <h4 class="admin-title">עריכת אודות</h4>
              <label class="form-label" for="admin-about">תוכן אודות</label>
              <textarea
                id="admin-about"
                class="form-input"
                rows="6"
                placeholder="הכניסו טקסט אודות..."
              ></textarea>
              <button id="admin-about-save" class="primary-button mt-4">
                שמירה
              </button>
              <p id="admin-about-status" class="text-sm mt-2"></p>
            </div>
            
            <div class="admin-card">
              <h4 class="admin-title">עריכת לוגו</h4>
              <div class="space-y-4">
                <div class="flex items-center gap-4">
                  <img
                    id="admin-logo-preview"
                    src="assets/b_yaakov_bakery_02.png"
                    alt="לוגו נוכחי"
                    class="h-24 w-auto border border-amber-200 rounded-lg"
                  />
                </div>
                <button id="admin-logo-replace-btn" class="primary-button sm:w-auto">
                  <i data-lucide="image" class="w-4 h-4 inline-block mr-2"></i>
                  החלף לוגו
                </button>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer class="border-t border-amber-200 mt-10">
        <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-stone-600">
          © 2026 בית מאפה ברכת יעקב • הזמנות אונליין
        </div>
      </footer>
    </div>

    <aside id="cart-drawer" class="cart-drawer">
      <div class="cart-header">
        <div>
          <p class="text-sm text-stone-500">העגלה שלך</p>
          <h3 class="text-xl font-bold text-amber-900">סל הזמנה</h3>
        </div>
        <button id="close-cart" class="text-stone-500 hover:text-stone-700">
          סגור
        </button>
      </div>
      <div id="cart-items" class="cart-items"></div>
      <div class="cart-footer">
        <div class="flex items-center justify-between text-lg font-bold">
          <span>סה"כ לתשלום</span>
          <span id="cart-total">₪0</span>
        </div>
        <button id="checkout-scroll" class="primary-button">
          המשך לפרטים נוספים
        </button>
      </div>
    </aside>

    <button id="floating-cart" class="floating-cart">
      <i data-lucide="shopping-bag" class="w-4 h-4"></i>
      <span class="text-sm">עגלה</span>
      <span id="floating-count" class="font-semibold">0</span>
      <span id="floating-total" class="font-semibold">₪0</span>
    </button>

    <div id="overlay" class="overlay hidden"></div>

    <div id="product-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">פרטי מוצר</h4>
          <button id="modal-close" class="secondary-button">סגור</button>
        </div>
        <div class="grid gap-3 mt-4">
          <div>
            <label class="form-label" for="modal-title">שם מוצר</label>
            <input id="modal-title" class="form-input" />
          </div>
          <div>
            <label class="form-label" for="modal-price">מחיר</label>
            <input id="modal-price" type="number" min="0" class="form-input" />
          </div>
          <div>
            <label class="form-label">קטגוריה</label>
            <div class="dropdown" id="modal-category-dropdown">
              <button
                type="button"
                id="modal-category-trigger"
                class="form-input dropdown-trigger"
              >
                בחר קטגוריה
              </button>
              <div class="dropdown-panel">
                <input
                  id="modal-category-search"
                  class="form-input"
                  placeholder="חיפוש קטגוריה"
                />
                <div id="modal-category-list" class="dropdown-list"></div>
              </div>
            </div>
          </div>
          <div>
            <label class="form-label" for="modal-image">העלאת תמונה</label>
            <input id="modal-image" type="file" accept="image/*" class="file-input" />
            <label class="file-button" for="modal-image">העלה קובץ</label>
          </div>
          <label class="flex items-center gap-2 text-sm text-stone-700">
            <input id="modal-stock" type="checkbox" class="form-checkbox" />
            זמין במלאי
          </label>
        </div>
        <div class="flex flex-wrap gap-3 mt-6">
          <button id="modal-save" class="primary-button">שמירה</button>
          <button id="modal-delete" class="secondary-button">מחיקת מוצר</button>
        </div>
        <p id="modal-status" class="text-sm mt-2"></p>
      </div>
    </div>

    <div id="create-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">יצירת מוצר חדש</h4>
          <button id="create-modal-close" class="secondary-button">סגור</button>
        </div>
        <div class="grid gap-3 mt-4">
          <div>
            <label class="form-label" for="create-title">שם מוצר</label>
            <input id="create-title" class="form-input" />
          </div>
          <div>
            <label class="form-label" for="create-price">מחיר</label>
            <input id="create-price" type="number" min="0" class="form-input" />
          </div>
          <div>
            <label class="form-label">קטגוריה</label>
            <div class="dropdown" id="create-category-dropdown">
              <button
                type="button"
                id="create-category-trigger"
                class="form-input dropdown-trigger"
              >
                בחר קטגוריה
              </button>
              <div class="dropdown-panel">
                <input
                  id="create-category-search"
                  class="form-input"
                  placeholder="חיפוש קטגוריה"
                />
                <div id="create-category-list" class="dropdown-list"></div>
              </div>
            </div>
          </div>
          <div>
            <label class="form-label" for="create-image">העלאת תמונה</label>
            <input id="create-image" type="file" accept="image/*" class="file-input" />
            <label class="file-button" for="create-image">העלה קובץ</label>
          </div>
        </div>
        <div class="flex flex-wrap gap-3 mt-6">
          <button id="create-save" class="primary-button">שמירה</button>
        </div>
      </div>
    </div>

    <div id="order-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">יצירת הזמנה חדשה</h4>
          <button id="order-modal-close" class="secondary-button">סגור</button>
        </div>
        <div class="grid gap-3 mt-4">
          <div>
            <label class="form-label" for="order-name">שם</label>
            <input id="order-name" class="form-input" />
          </div>
          <div>
            <label class="form-label" for="order-date">תאריך</label>
            <input id="order-date" type="datetime-local" class="form-input" />
          </div>
          <div>
            <label class="form-label" for="order-total">סכום</label>
            <input id="order-total" type="number" min="0" class="form-input" />
          </div>
          <label class="flex items-center gap-2 text-sm text-stone-700">
            <input id="order-paid" type="checkbox" class="form-checkbox" />
            שולם
          </label>
          <div>
            <label class="form-label" for="order-notes">הערות</label>
            <textarea id="order-notes" class="form-input" rows="3"></textarea>
          </div>
        </div>
        <div class="flex flex-wrap gap-3 mt-6">
          <button id="order-save" class="primary-button">שמירה</button>
        </div>
      </div>
    </div>

    <div id="delete-confirm-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">מחיקת מוצר</h4>
          <button id="delete-confirm-close" class="secondary-button">סגור</button>
        </div>
        <p class="text-stone-700 mt-4">האם אתה בטוח שאתה רוצה למחוק את המוצר?</p>
        <div class="flex flex-wrap gap-3 mt-6">
          <button id="delete-confirm-yes" class="primary-button">כן, למחוק</button>
          <button id="delete-confirm-no" class="secondary-button">ביטול</button>
        </div>
      </div>
    </div>

    <div id="order-details-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">פרטי הזמנה</h4>
          <button id="order-details-close" class="secondary-button">סגור</button>
        </div>
        <div id="order-details-content" class="grid gap-3 mt-4"></div>
      </div>
    </div>

    <div id="category-modal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between">
          <h4 class="admin-title">יצירת קטגוריה חדשה</h4>
          <button id="category-modal-close" class="secondary-button">סגור</button>
        </div>
        <div class="grid gap-3 mt-4">
          <div>
            <label class="form-label" for="category-name">שם קטגוריה</label>
            <input id="category-name" class="form-input" />
          </div>
        </div>
        <div class="flex flex-wrap gap-3 mt-6">
          <button id="category-save" class="primary-button">שמירה</button>
        </div>
      </div>
    </div>

    <script src="assets/config.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="module" src="assets/app.js"></script>
  </body>
</html>
